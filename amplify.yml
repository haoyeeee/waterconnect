version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci --cache .npm --prefer-offline
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: dist
    files:
      - "**/*"
  cache:
    paths:
      - .npm/**/*
  customHeaders:
    - pattern: "/index.html"
      headers:
        - key: "Content-Security-Policy"
          value: >
            default-src 'self';
            script-src 'self' 'unsafe-inline';
            style-src 'self' https://fonts.googleapis.com;
            font-src 'self' https://fonts.gstatic.com data:;
            img-src 'self' data: https:;
            object-src 'none';
            frame-ancestors 'none';
    - pattern: "/sitemap.xml"
      headers:
        - key: "Content-Security-Policy"
          value: >
            default-src 'self';
            script-src 'self' 'unsafe-inline';
            style-src 'self' https://fonts.googleapis.com;
            font-src 'self' https://fonts.gstatic.com data:;
            img-src 'self' data: https:;
            object-src 'none';
            frame-ancestors 'none';
    - pattern: "**/*"
      headers:
        - key: "X-Frame-Options"
          value: "DENY"
        - key: "Content-Security-Policy"
          value: >
            default-src 'self'; 
            script-src 'self' 'unsafe-inline'; 
            style-src 'self' https://fonts.googleapis.com; 
            font-src 'self' https://fonts.gstatic.com data:; 
            img-src 'self' data: https:;
            object-src 'none'; 
            frame-ancestors 'none';
        - key: "X-Content-Type-Options"
          value: "nosniff"
        - key: "Strict-Transport-Security"
          value: "max-age=31536000; includeSubDomains; preload"
